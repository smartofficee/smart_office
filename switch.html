<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  


    <link rel="stylesheet" href="switch.css">
  </head>

  <body>
    <aside class="sidebar position-fixed top-0 left-0 overflow-auto h-100 float-left" id="show-side-navigation1">
      <i class="uil-bars close-aside d-md-none d-lg-none" data-close="show-side-navigation1"></i>
    
      <div class="search position-relative text-center px-4 py-3 mt-2">
        <input type="text" class="form-control w-100 border-0 bg-transparent" placeholder="Search here">
        <i class="fa fa-search position-absolute d-block fs-6"></i>
      </div>
    
      <ul class="categories list-unstyled">
        <li class="has-dropdown">
          <i class="uil-estate fa-fw"></i><a href="#">1</a>
        </li>
        <li class="">
          <i class="uil-folder"></i><a href="#">2</a>
        </li>
        <li class="has-dropdown">
          <i class="uil-calendar-alt"></i><a href="#">3</a>
        </li>
        <li class="has-dropdown">
          <i class="uil-envelope-download fa-fw"></i><a href="#">4</a>
          
        </li>
        
        <li class="">
          <i class="uil-map-marker"></i><a href="#"> LogOut</a>
        </li>
      </ul>
    </aside>
    
    <section id="wrapper">
      <div class="black">

      </div>
      
    
      <div class="p-4">
        <div class="tire">
          =
        </div>
        


        <div class="welcome">
          <div id="first" class="content rounded-3 p-3" style="border-radius: 20px;">
            <h1 class="fs-3">Graph</h1>
              <section class="statis mt-4 text-center">
                <div class="row" id="row3">
                  <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                    <div class="box p-3">
                      <i class="uil-eye"></i>
                      <label class="switch">
                        <input type="checkbox" id="l0">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 1</p>
                    </div>
                  </div>

                  <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                    <div class="box p-3">
                      <i class="uil-user"></i>
                      <label class="switch">
                        <input type="checkbox" id="l1">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 2</p>
                    </div>
                  </div>
                  <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                    <div class="box p-3">
                      <i class="uil-shopping-cart"></i>
                      <label class="switch">
                        <input type="checkbox" id="l2">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 3</p>
                    </div>
                  </div>
                  
                </div>
      
                <div class="row" id="row3" style="margin-top: 3%;">
                  <div class="col-md-6 col-lg-3">
                    <div class="box p-3">
                      <i class="uil-feedback"></i>
                      <label class="switch">
                        <input type="checkbox" id="l3">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 4</p>
                    </div>
                  </div>
                  <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                    <div class="box p-3">
                      <i class="uil-eye"></i>
                      <label class="switch">
                        <input type="checkbox" id="l4">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 5</p>
                    </div>
                  </div>
                  <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                    <div class="box p-3">
                      <i class="uil-user"></i>
                      <label class="switch">
                        <input type="checkbox" id="l5">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 6</p>
                    </div>
                  </div>
                </div>


                <div class="row" id="row3" style="margin-top: 3%;">
                  <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                    <div class="box p-3">
                      <i class="uil-shopping-cart"></i>
                      <label class="switch">
                        <input type="checkbox" id="l6">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 7</p>
                    </div>
                  </div>
                  <div class="col-md-6 col-lg-3">
                    <div class="box p-3">
                      <i class="uil-feedback"></i>
                      <label class="switch">
                        <input type="checkbox" id="l7">
                        <span class="slider round" id="slid"></span>
                      </label>
                      <p class="lead">Room 8</p>
                    </div>
                  </div>
                </div>
              </section>

            
          </div>

          <div id="second" class="content rounded-3 p-3" style="border-radius: 20px;">
            <h1 class="fs-3">Welcome to Smart-Techno</h1>
            <section class="statis mt-4 text-center">
              <div class="row" id="row3">
                <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <div class="box p-3">
                    <i class="uil-eye"></i>
                    <label class="switch">
                      <input type="checkbox" id="l0">
                      <span class="slider round" id="slid"></span>
                    </label>
                    <p class="lead">Room 1</p>
                  </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <div class="box p-3">
                    <i class="uil-user"></i>
                    <label class="switch">
                      <input type="checkbox" id="l1">
                      <span class="slider round" id="slid"></span>
                    </label>
                    <p class="lead">Room 2</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 mb-4 mb-md-0">
                  <div class="box p-3">
                    <i class="uil-shopping-cart"></i>
                    <label class="switch">
                      <input type="checkbox" id="l2">
                      <span class="slider round" id="slid"></span>
                    </label>
                    <p class="lead">Room 3</p>
                  </div>
                </div>
                
              </div>
    
              <div class="row" id="row3" style="margin-top: 3%;">
                <div class="col-md-6 col-lg-3">
                  <div class="box p-3">
                    <i class="uil-feedback"></i>
                    <label class="switch">
                      <input type="checkbox" id="l3">
                      <span class="slider round" id="slid"></span>
                    </label>
                    <p class="lead">Room 4</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <div class="box p-3">
                    <i class="uil-eye"></i>
                    <label class="switch">
                      <input type="checkbox" id="l4">
                      <span class="slider round" id="slid"></span>
                    </label>
                    <p class="lead">Room 5</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <div class="box p-3">
                    <i class="uil-user"></i>
                    <label class="switch">
                      <input type="checkbox" id="l5">
                      <span class="slider round" id="slid"></span>
                    </label>
                    <p class="lead">Room 6</p>
                  </div>
                </div>
              </div>


              
            </section>

          </div>
        </div>

        
        
        <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
  

      </div>
    </section>







    <style>
.title{
  margin-left: 6%;
  font-family: 'Dosis', sans-serif;
  color:white;
  font-weight:bolder;
  font-size:22px;
  letter-spacing:2px;
  height:40%;
  width:40%;
  display:flex;
  align-items:center;
  border-bottom:0.5px solid #ecf0f1;
}
.filter{
  height:40px;
  width:40px;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  /* margin-right:20px; */
  border-radius:50%;
  background:#1abc9c;
}
.expenses{
  height:80px;
  width:90%;
  margin:0 auto;
  display:flex;
  border-radius:5px;
  background:rgba(189, 195, 199,0.2);
  color:white;
  margin-bottom:10px;
  box-sizing:border-box;
  padding:10px;
  font-family:'Dosis';
  align-items:center;
  justify-content:space-around;
}
.units{
  font-size:12px;
}
.resource{
  width:80%;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.icon{
  height:50px;
  width:50px;
  display:flex;
  justify-content:center;
  align-items:center;
  border-radius:50%;
  background-color:#ecf0f1;
}
.rname{
  font-size:18px;
  letter-spacing:2px;
}
i,i::before{
  font-size: 20px;
}
.val{
    width: 50px;
    text-align: center;
    padding: 3px 4px;
    border-radius:1.2em;
}
    </style>


















  </body>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  

  <script>
    const apiSwitch = document.getElementById("l0");
  var firebaseConfig = {
    apiKey: "AIzaSyA3txSt2Tm0q4XByth4ligkMqmsaWF7xuc",
  authDomain: "smart-office-e6873.firebaseapp.com",
  databaseURL: "https://smart-office-e6873-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "smart-office-e6873",
  storageBucket: "smart-office-e6873.appspot.com",
  messagingSenderId: "411664906015",
  appId: "1:411664906015:web:e8cf23e93b2d0feac7a22a",
  measurementId: "G-GBVF29HCBL"
  };
  firebase.initializeApp(firebaseConfig);

  // Reference to the Firebase Realtime Database
  var database = firebase.database();

  function updateSwitch() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/0");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch.checked = true;
        } else {
          apiSwitch.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }

  updateSwitch();

  apiSwitch.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/0");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch, 1000);


//   firebase.initializeApp(firebaseConfig);


// function updateSwitch() {
//   const firebaseRef = firebase.database().ref("master-1/relay/0");

//   firebaseRef.once("value")
//     .then(snapshot => {
//       const zero = snapshot.val();

//       if (zero === 1) {
//         apiSwitch.checked = true;
//       } else {
//         apiSwitch.checked = false;
//       }
//     })
//     .catch(error => console.error("Error fetching data:", error));
// }

// updateSwitch();

// apiSwitch.addEventListener("change", function() {
//   const firebaseRef = firebase.database().ref("master-1/relay/0");
//   const value = this.checked ? 1 : 0;

//   firebaseRef.set(value)
//     .then(() => {
//       console.log("Data successfully updated");
//       saveSwitchStatus(value); // Сохранение информации о переключателе в Firestore
//     })
//     .catch(error => console.error("Error updating data:", error));
// });

// function saveSwitchStatus(value) {
//   const firestore = firebase.firestore();
//   const switchesCollection = firestore.collection("0");

//   const currentTime = new Date().toISOString();

//   switchesCollection.add({
//     value: value,
//     timestamp: currentTime
//   })
//     .then(() => console.log("Switch status saved to Firestore"))
//     .catch(error => console.error("Error saving switch status:", error));
// }

// setInterval(updateSwitch, 1000);





  



  const apiSwitch1 = document.getElementById("l1");
  function updateSwitch1() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/1");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch1.checked = true;
        } else {
          apiSwitch1.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }

  updateSwitch1();

  apiSwitch1.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/1");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch1, 1000);
















  const apiSwitch2 = document.getElementById("l2");
  function updateSwitch2() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/2");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch2.checked = true;
        } else {
          apiSwitch2.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }
  updateSwitch2();
  apiSwitch2.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/2");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch2, 1000);





  const apiSwitch3 = document.getElementById("l3");
  function updateSwitch3() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/3");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch3.checked = true;
        } else {
          apiSwitch3.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }
  updateSwitch3();
  apiSwitch3.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/3");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch3, 1000);




  const apiSwitch4 = document.getElementById("l4");
  function updateSwitch4() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/4");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch4.checked = true;
        } else {
          apiSwitch4.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }
  updateSwitch4();
  apiSwitch4.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/4");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch4, 1000);


  const apiSwitch5 = document.getElementById("l5");
  function updateSwitch5() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/5");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch5.checked = true;
        } else {
          apiSwitch5.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }
  updateSwitch5();
  apiSwitch5.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/5");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch5, 1000);




  const apiSwitch6 = document.getElementById("l6");
  function updateSwitch6() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/6");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch6.checked = true;
        } else {
          apiSwitch6.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }
  updateSwitch6();
  apiSwitch6.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/6");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch6, 1000);


  const apiSwitch7 = document.getElementById("l7");
  function updateSwitch7() {
    // Reference to the 'zero' value in the Firebase database
    var firebaseRef = database.ref("master-1/relay/7");
  
    firebaseRef.once("value")
      .then(snapshot => {
        var zero = snapshot.val();
      
        if (zero === 0) {
          apiSwitch7.checked = true;
        } else {
          apiSwitch7.checked = false;
        }
      })
      .catch(error => console.error("Error fetching data:", error));
  }
  updateSwitch7();
  apiSwitch7.addEventListener("change", function() {
    var firebaseRef = database.ref("master-1/relay/7");
    var value = this.checked ? 0 : 1;
  
    firebaseRef.set(value)
      .then(() => console.log("Data successfully updated"))
      .catch(error => console.error("Error updating data:", error));
  });

  setInterval(updateSwitch7, 1000);







const refPath = 'modem-1/BME-280';
const realtimeRef = firebase.database().ref(refPath);

// Функция для отображения данных на HTML-странице
function displayData(humidity, pressure, temperature) {
  const humidityContainer = document.getElementById('humidity-data');
  const pressureContainer = document.getElementById('pressure-data');
  const temperatureContainer = document.getElementById('temperature-data');
  humidityContainer.textContent = humidity;
  pressureContainer.textContent = pressure;
  temperatureContainer.textContent = temperature;
}


function updateData() {
// Слушатель события изменения значения в Realtime Database
realtimeRef.on('value', (snapshot) => {
  const humidity = snapshot.child('humidity').val();
  const pressure = snapshot.child('pressure').val();
  const temperature = snapshot.child('temperature').val();

  console.log('humidity:', humidity);
  console.log('pressure:', pressure);
  console.log('temperature:', temperature);
  displayData(humidity, pressure, temperature);
}, (error) => {
  console.error('Error:', error);
});
}
setInterval(updateData, 1000);












const refPath1 = 'modem-2/BME-280';
const realtimeRef1 = firebase.database().ref(refPath1);

function displayData2(humidity2, pressure2, temperature2) {
  const humidityContainer2 = document.getElementById('humidity-data2');
  const pressureContainer2 = document.getElementById('pressure-data2');
  const temperatureContainer2 = document.getElementById('temperature-data2');
  humidityContainer2.textContent = humidity2;
  pressureContainer2.textContent = pressure2;
  temperatureContainer2.textContent = temperature2;

}


function updateData2() {
// Слушатель события изменения значения в Realtime Database
realtimeRef1.on('value', (snapshot) => {
  const humidity2 = snapshot.child('humidity').val();
  const pressure2 = snapshot.child('pressure').val();
  const temperature2 = snapshot.child('temperature').val();

  console.log('humidity:', humidity2);
  console.log('pressure:', pressure2);
  console.log('temperature:', temperature2);
  displayData2(humidity2, pressure2, temperature2);
}, (error) => {
  console.error('Error:', error);
});
}
setInterval(updateData2, 1000);








  </script>

</html>